{% extends 'common/base.html' %}
{% load static %}
 
{% block content %}
  <h2>Upcoming Events</h2>
  
  <!-- Контейнер, който разделя търсачката и евентите -->
  <div class="dashboard-container">
    <!-- Лява колона: Търсачка -->
    <div class="search-column">
      <div class="search-form-container">
        <h3>Search Events</h3>
        <form method="get" class="search-form">
          {% csrf_token %}
          <div class="form-group">
            <label for="name">Event Name</label>
            <input type="text" name="name" id="name" placeholder="Search by name" value="{{ request.GET.name }}">
          </div>
          <details class="advanced-search">
            <summary>Advanced Search</summary>
            <div class="form-group">
              <label for="location">Location</label>
              <input type="text" name="location" id="location" placeholder="Search by location" value="{{ request.GET.location }}">
            </div>
            <div class="form-group">
              <label for="date">Event Date</label>
              <input type="date" name="date" id="date" value="{{ request.GET.date }}">
            </div>
          </details>
          <button type="submit">Search</button>
        </form>
      </div>
    </div>
    
    <!-- Дясна колона: Евенти -->
    <div class="events-column">
      <div class="events-container">
        <h3>Upcoming Events</h3>
        {% if events %}
          <div class="events-list">
            {% for event in events %}
              <div class="event-card" style="background-image: url('{{ event.get_background_image }}');">
                <h4>{{ event.name }}</h4>
{#                <p><strong>Created by:</strong> {{ event.created_by }}</p>#}
{#                <p><strong>Location:</strong> {{ event.location }}</p>#}
{#                <p><strong>Date:</strong> {{ event.date|date:"F j, Y, g:i a" }}</p>#}
{#                <p><strong>Description:</strong> {{ event.description }}</p>#}
              </div>
            {% endfor %}
          </div>
          
          <!-- Пагинация -->
          <div class="pagination">
            {% if events.has_previous %}
              <a href="?page=1">&laquo; First</a>
              <a href="?page={{ events.previous_page_number }}">Previous</a>
            {% endif %}
            <span>Page {{ events.number }} of {{ events.paginator.num_pages }}</span>
            {% if events.has_next %}
              <a href="?page={{ events.next_page_number }}">Next</a>
              <a href="?page={{ events.paginator.num_pages }}">Last &raquo;</a>
            {% endif %}
          </div>
        {% else %}
          <p>No upcoming events.</p>
        {% endif %}
      </div>
    </div>
  </div>
  
{% endblock %}