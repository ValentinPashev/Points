{% extends 'common/base.html' %}

{% block content %}
<h2>Създаване на отчет</h2>
<form method="post">
    {% csrf_token %}
    <label for="id_organizers">Организатори:</label>
    <select id="id_organizers" name="organizers" multiple="multiple" class="select2"></select>

    {{ form.number_of_days.label }} {{ form.number_of_days }}
    {{ form.prepared.label }} {{ form.prepared }}
    {{ form.attended.label }} {{ form.attended }}
    {{ form.participated_actively.label }} {{ form.participated_actively }}

    <button type="submit">Запази</button>
</form>

<!-- Включваме jQuery и Select2 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

<script>
    $(document).ready(function() {
        $('#id_organizers').select2({
            placeholder: "Въведи имейл...",
            allowClear: true,
            ajax: {
                url: "{% url 'user_autocomplete' %}",
                dataType: 'json',
                delay: 250,
                data: function (params) {
                    return { term: params.term };  
                },
                processResults: function (data) {
                    return { results: data };  
                },
                cache: true
            },
            minimumInputLength: 1,  
            maximumSelectionLength: 3  
        });
    });
</script>
{% endblock %}
